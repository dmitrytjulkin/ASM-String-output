Turbo Assembler	 Version 4.1	    02/21/26 18:30:28	    Page 1
str-out.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4
      5	      =B800		     VIDEOSEG		     equ 0b800h
      6	      =07CA		     ADRESS_OF_FRAME	     equ 007CAh
      7	      =00A0		     REL_ADRESS_OF_BORDER    equ 000A0h
      8
      9	      =0082		     ADRESS_OF_FIRST_CMD     equ 00082h
     10	      =0085		     ADRESS_OF_SECOND_CMD    equ 00085h
     11	      =0088		     ADRESS_OF_INPUT	     equ 00088h
     12
     13	      =0007		     COUNT_TO_SKIP	     equ 7d
     14
     15	      =0070		     TEXT_COLOR		     equ 070h
     16
     17	      =00CD		     HORIZONTAL_BORDER	     equ 0CDh
     18	      =00BA		     VERTICAL_BORDER	     equ 0BAh
     19	      =00C9		     TOP_LEFT_CORNER	     equ 0C9h
     20	      =00BB		     TOP_RIGHT_CORNER	     equ 0BBh
     21	      =00C8		     BOTTOM_LEFT_CORNER	     equ 0C8h
     22	      =00BC		     BOTTOM_RIGHT_CORNER     equ 0BCh
     23
     24	0100			     start:
     25	0100  B8 B800			     mov ax, VIDEOSEG
     26	0103  8E C0			     mov es, ax
     27
     28	0105  B4 70			     mov ah, TEXT_COLOR
     29
     30	0107  E8 0008			     call PrintFrame
     31
     32	010A  E8 0052			     call PrintSentence
     33
     34	010D  B8 4C00			     mov ax, 4c00h
     35	0110  CD 21			     int 21h
     36				     ;___________________________________________________________________________;
     37
     38
     39				     ;__PRINTFRAME__
     40				     ;Printing frame with special color	and with given size relative to	sentence
     41				     ;Entry: AH	- color	of symbols
     42				     ;Exit: -
     43				     ;Destr: AL, BX, CX, DI
     44				     ;___________________________________________________________________________;
     45	0112			     PrintFrame		     proc
     46	0112  E8 0004			     call PrintUpperBorder
     47
     48				     ;	     call PrintVerticalBorderAndBackground
     49
     50	0115  E8 0024			     call PrintLowerBorder
     51
     52	0118  C3			     ret
     53	0119				     endp
     54				     ;___________________________________________________________________________;
     55
     56
     57				     ;__PRINTUPPERBORDER__
Turbo Assembler	 Version 4.1	    02/21/26 18:30:28	    Page 2
str-out.asm



     58				     ;Printing the top and bottom horizontal borders
     59				     ;Entry: AH	= color	of the text
     60				     ;Exit: -
     61				     ;Destr: AL, BX, CX, DI
     62				     ;___________________________________________________________________________;
     63	0119			     PrintUpperBorder	     proc
     64	0119  E8 00A1			     call FindInputStrlen
     65
     66	011C  8B D9			     mov bx, cx
     67	011E  E8 00A6			     call RoundBxToEvenNum
     68	0121  81 C3 00A0		     add bx, REL_ADRESS_OF_BORDER
     69	0125  81 EB 07CA		     sub bx, ADRESS_OF_FRAME
     70	0129  F7 DB			     neg bx
     71	012B  8B FB			     mov di, bx			     ;di = adress to print
     72
     73	012D  B0 CD			     mov al, HORIZONTAL_BORDER
     74
     75	012F  33 DB			     xor bx, bx
     76
     77	0131			     building_upper_border:
     78	0131  D1 E3			     shl bx, 1
     79	0133  26: 89 01			     mov es:[di+bx], ax
     80	0136  D1 EB			     shr bx, 1
     81
     82	0138  43			     inc bx
     83
     84	0139  E2 F6			     loop building_upper_border
     85
     86	013B  C3			     ret
     87	013C				     endp
     88				     ;___________________________________________________________________________;
     89
     90
     91				     ;__PRINTLOWERBORDER__
     92				     ;Printing lower border (include lower corners) in special color
     93				     ;Entry: AH	- color	of border
     94				     ;Exit: -
     95				     ;Destr: AL, BX, CX, DI
     96				     ;___________________________________________________________________________;
     97	013C			     PrintLowerBorder	     proc
     98	013C  E8 007E			     call FindInputStrlen
     99
    100	013F  8B D9			     mov bx, cx
    101	0141  E8 0083			     call RoundBxToEvenNum
    102	0144  F7 DB			     neg bx
    103	0146  81 C3 07CA		     add bx, ADRESS_OF_FRAME
    104	014A  81 C3 00A0		     add bx, REL_ADRESS_OF_BORDER
    105	014E  8B FB			     mov di, bx			     ;di = adress to print
    106
    107	0150  B0 CD			     mov al, HORIZONTAL_BORDER
    108
    109	0152  33 DB			     xor bx, bx
    110
    111	0154			     building_lower_border:
    112	0154  D1 E3			     shl bx, 1
    113	0156  26: 89 01			     mov es:[di+bx], ax
    114	0159  D1 EB			     shr bx, 1
Turbo Assembler	 Version 4.1	    02/21/26 18:30:28	    Page 3
str-out.asm



    115
    116	015B  43			     inc bx
    117
    118	015C  E2 F6			     loop building_lower_border
    119
    120	015E  C3			     ret
    121	015F				     endp
    122				     ;___________________________________________________________________________;
    123
    124				     ;__PRINTSENTENCE__
    125				     ;Printing the input string
    126				     ;Entry: AH	= color	of sentence
    127				     ;Exit: -
    128				     ;Destr: AL, BX, CX, DI
    129				     ;___________________________________________________________________________;
    130	015F			     PrintSentence	     proc
    131	015F  E8 005B			     call FindInputStrlen
    132
    133	0162  8B D9			     mov bx, cx
    134	0164  E8 0060			     call RoundBxToEvenNum
    135	0167  F7 DB			     neg bx
    136	0169  81 C3 07CA		     add bx, ADRESS_OF_FRAME
    137	016D  8B FB			     mov di, bx
    138
    139	016F  A0 0088			     mov al, ds:[ADRESS_OF_INPUT]    ;al = the 1st symbol of input
    140
    141	0172  33 DB			     xor bx, bx
    142
    143	0174			     building_sentence:
    144	0174  D1 E3			     shl bx, 1
    145	0176  26: 89 01			     mov es:[di+bx], ax
    146	0179  D1 EB			     shr bx, 1
    147
    148	017B  43			     inc bx
    149	017C  8A 87 0088		     mov al, ds:[bx+ADRESS_OF_INPUT]
    150
    151	0180  E2 F2			     loop building_sentence
    152
    153	0182  C3			     ret
    154	0183				     endp
    155				     ;___________________________________________________________________________;
    156
    157
    158				     ;__BUILDTOPCORNERS__
    159				     ;Printing top right and left corners.
    160				     ;Entry: AH	= color	of text
    161				     ;Exit: -
    162				     ;Destr: AL, BX, CX, DI
    163				     ;___________________________________________________________________________;
    164	0183			     BuildTopCorners	     proc
    165	0183  E8 0037			     call FindInputStrlen
    166
    167	0186  8B D9			     mov bx, cx
    168	0188  E8 003C			     call RoundBxToEvenNum
    169				     ;	     mov di, CENTER_OF_FRAME
    170				     ;	     sub di, PLACE_OF_UPPER_BORDER   ;di = same	row as border, but in center
    171	018B  2B FB			     sub di, bx
Turbo Assembler	 Version 4.1	    02/21/26 18:30:28	    Page 4
str-out.asm



    172
    173	018D  B0 C9			     mov al, TOP_LEFT_CORNER
    174	018F  83 EF 02			     sub di, 2			     ;di = the start of	top border
    175	0192  26: 89 05			     mov es:[di], ax
    176
    177	0195  D1 E1			     shl cx, 1
    178
    179	0197  B0 BB			     mov al, TOP_RIGHT_CORNER
    180	0199  03 F9			     add di, cx			     ;di = the end of top border
    181	019B  26: 89 45	02		     mov es:[di+2], ax
    182
    183	019F  C3			     ret
    184	01A0				     endp
    185				     ;___________________________________________________________________________;
    186
    187
    188				     ;__BUILDBOTTOMCORNERS__
    189				     ;Printing bottom left and right corners of	frame.
    190				     ;Entry: AH	= color	of the text
    191				     ;Exit: -
    192				     ;Destr: AL, BX, CX, DI
    193				     ;___________________________________________________________________________;
    194	01A0			     BuildBottomCorners	     proc
    195	01A0  E8 001A			     call FindInputStrlen
    196
    197	01A3  8B D9			     mov bx, cx
    198	01A5  E8 001F			     call RoundBxToEvenNum
    199				     ;	     mov di, CENTER_OF_FRAME
    200				     ;	     sub di, PLACE_OF_LOWER_BORDER   ;di = same	row as border, but in center
    201	01A8  2B FB			     sub di, bx
    202
    203	01AA  B0 C8			     mov al, BOTTOM_LEFT_CORNER
    204	01AC  83 EF 02			     sub di, 2
    205	01AF  26: 89 05			     mov es:[di], ax		     ;printing bottom left corner
    206
    207	01B2  D1 E1			     shl cx, 1
    208
    209	01B4  B0 BC			     mov al, BOTTOM_RIGHT_CORNER
    210	01B6  03 F9			     add di, cx
    211	01B8  26: 89 45	02		     mov es:[di+2], ax		     ;printing bottom right corner
    212
    213	01BC  C3			     ret
    214	01BD				     endp
    215				     ;___________________________________________________________________________;
    216
    217
    218				     ;__SETCYCLECOUNTER__
    219				     ;Setting cx as counter of input symbols (the max value is 0EEh)
    220				     ;Entry: -
    221				     ;Exit: cx = count of input	symbols
    222				     ;Destr: -
    223				     ;___________________________________________________________________________;
    224	01BD			     FindInputStrlen proc
    225	01BD  8A 0E 0080		     mov cl, ds:[80h]
    226	01C1  B5 00			     mov ch, 00
    227
    228	01C3  83 E9 07			     sub cx, COUNT_TO_SKIP
Turbo Assembler	 Version 4.1	    02/21/26 18:30:28	    Page 5
str-out.asm



    229
    230	01C6  C3			     ret
    231	01C7				     endp
    232				     ;__________________________________________________________________________;
    233
    234
    235				     ;__ROUNDBXTOEVENNUM__
    236				     ;Rounding value in	bx to the nearest and the lowest even number
    237				     ;Entry: BX	= value
    238				     ;Exit: BX = even value
    239				     ;Destr: -
    240				     ;__________________________________________________________________________;
    241	01C7			     RoundBxToEvenNum		     proc
    242	01C7  D1 EB			     shr bx, 1
    243	01C9  D1 E3			     shl bx, 1
    244
    245	01CB  C3			     ret
    246	01CC				     endp
    247				     ;__________________________________________________________________________;
    248
    249				     end	     Start
Turbo Assembler	 Version 4.1	    02/21/26 18:30:28	    Page 6
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/21/26"
??FILENAME			  Text	 "str-out "
??TIME				  Text	 "18:30:28"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 STR-OUT
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ADRESS_OF_FIRST_CMD		  Number 0082
ADRESS_OF_FRAME			  Number 07CA
ADRESS_OF_INPUT			  Number 0088
ADRESS_OF_SECOND_CMD		  Number 0085
BOTTOM_LEFT_CORNER		  Number 00C8
BOTTOM_RIGHT_CORNER		  Number 00BC
BUILDBOTTOMCORNERS		  Near	 DGROUP:01A0
BUILDING_LOWER_BORDER		  Near	 DGROUP:0154
BUILDING_SENTENCE		  Near	 DGROUP:0174
BUILDING_UPPER_BORDER		  Near	 DGROUP:0131
BUILDTOPCORNERS			  Near	 DGROUP:0183
COUNT_TO_SKIP			  Number 0007
FINDINPUTSTRLEN			  Near	 DGROUP:01BD
HORIZONTAL_BORDER		  Number 00CD
PRINTFRAME			  Near	 DGROUP:0112
PRINTLOWERBORDER		  Near	 DGROUP:013C
PRINTSENTENCE			  Near	 DGROUP:015F
PRINTUPPERBORDER		  Near	 DGROUP:0119
REL_ADRESS_OF_BORDER		  Number 00A0
ROUNDBXTOEVENNUM		  Near	 DGROUP:01C7
START				  Near	 DGROUP:0100
TEXT_COLOR			  Number 0070
TOP_LEFT_CORNER			  Number 00C9
TOP_RIGHT_CORNER		  Number 00BB
VERTICAL_BORDER			  Number 00BA
VIDEOSEG			  Number B800

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  01CC Word	  Public  CODE
