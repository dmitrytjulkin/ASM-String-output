Turbo Assembler	 Version 4.1	    02/21/26 18:40:28	    Page 1
str-out.asm



      1	0000			     .model tiny
      2	0000			     .code
      3				     org 100h
      4
      5	      =B800		     VIDEOSEG		     equ 0b800h
      6	      =07CA		     ADRESS_OF_FRAME	     equ 007CAh
      7	      =00A0		     REL_ADRESS_OF_BORDER    equ 000A0h
      8
      9	      =0082		     ADRESS_OF_FIRST_CMD     equ 00082h
     10	      =0085		     ADRESS_OF_SECOND_CMD    equ 00085h
     11	      =0088		     ADRESS_OF_INPUT	     equ 00088h
     12
     13	      =0007		     COUNT_TO_SKIP	     equ 7d
     14
     15	      =0070		     TEXT_COLOR		     equ 070h
     16
     17	      =00CD		     HORIZONTAL_BORDER	     equ 0CDh
     18	      =00BA		     VERTICAL_BORDER	     equ 0BAh
     19	      =00C9		     TOP_LEFT_CORNER	     equ 0C9h
     20	      =00BB		     TOP_RIGHT_CORNER	     equ 0BBh
     21	      =00C8		     BOTTOM_LEFT_CORNER	     equ 0C8h
     22	      =00BC		     BOTTOM_RIGHT_CORNER     equ 0BCh
     23
     24	0100			     start:
     25	0100  B8 B800			     mov ax, VIDEOSEG
     26	0103  8E C0			     mov es, ax
     27
     28	0105  B4 70			     mov ah, TEXT_COLOR
     29
     30	0107  E8 0008			     call PrintFrame
     31
     32	010A  E8 006C			     call PrintSentence
     33
     34	010D  B8 4C00			     mov ax, 4c00h
     35	0110  CD 21			     int 21h
     36				     ;___________________________________________________________________________;
     37
     38
     39				     ;__PRINTFRAME__
     40				     ;Printing frame with special color	and with given size relative to	sentence
     41				     ;Entry: AH	- color	of symbols
     42				     ;Exit: -
     43				     ;Destr: AL, BX, CX, DI
     44				     ;___________________________________________________________________________;
     45	0112			     PrintFrame		     proc
     46	0112  E8 0004			     call PrintUpperBorder
     47
     48				     ;	     call PrintVerticalBorderAndBackground
     49
     50	0115  E8 0031			     call PrintLowerBorder
     51
     52	0118  C3			     ret
     53	0119				     endp
     54				     ;___________________________________________________________________________;
     55
     56
     57				     ;__PRINTUPPERBORDER__
Turbo Assembler	 Version 4.1	    02/21/26 18:40:28	    Page 2
str-out.asm



     58				     ;Printing the top and bottom horizontal borders
     59				     ;Entry: AH	= color	of the text
     60				     ;Exit: -
     61				     ;Destr: AL, BX, CX, DI
     62				     ;___________________________________________________________________________;
     63	0119			     PrintUpperBorder	     proc
     64	0119  E8 00BB			     call FindInputStrlen
     65
     66	011C  8B D9			     mov bx, cx
     67	011E  E8 00C0			     call RoundBxToEvenNum
     68	0121  81 C3 00A0		     add bx, REL_ADRESS_OF_BORDER
     69	0125  81 EB 07CA		     sub bx, ADRESS_OF_FRAME
     70	0129  F7 DB			     neg bx
     71	012B  8B FB			     mov di, bx			     ;di = adress to print
     72
     73	012D  B0 C9			     mov al, TOP_LEFT_CORNER
     74	012F  26: 89 45	FE		     mov es:[di-2], ax		     ;printing top left	corner
     75
     76	0133  B0 CD			     mov al, HORIZONTAL_BORDER
     77
     78	0135  33 DB			     xor bx, bx
     79
     80	0137			     building_upper_border:
     81	0137  D1 E3			     shl bx, 1
     82	0139  26: 89 01			     mov es:[di+bx], ax
     83	013C  D1 EB			     shr bx, 1
     84
     85	013E  43			     inc bx
     86
     87	013F  E2 F6			     loop building_upper_border
     88
     89	0141  B0 BB			     mov al, TOP_RIGHT_CORNER
     90	0143  D1 E3			     shl bx, 1
     91	0145  26: 89 01			     mov es:[di+bx], ax		     ;printing top right corner
     92
     93	0148  C3			     ret
     94	0149				     endp
     95				     ;___________________________________________________________________________;
     96
     97
     98				     ;__PRINTLOWERBORDER__
     99				     ;Printing lower border (include lower corners) in special color
    100				     ;Entry: AH	- color	of border
    101				     ;Exit: -
    102				     ;Destr: AL, BX, CX, DI
    103				     ;___________________________________________________________________________;
    104	0149			     PrintLowerBorder	     proc
    105	0149  E8 008B			     call FindInputStrlen
    106
    107	014C  8B D9			     mov bx, cx
    108	014E  E8 0090			     call RoundBxToEvenNum
    109	0151  F7 DB			     neg bx
    110	0153  81 C3 07CA		     add bx, ADRESS_OF_FRAME
    111	0157  81 C3 00A0		     add bx, REL_ADRESS_OF_BORDER
    112	015B  8B FB			     mov di, bx			     ;di = adress to print
    113
    114	015D  B0 C8			     mov al, BOTTOM_LEFT_CORNER
Turbo Assembler	 Version 4.1	    02/21/26 18:40:28	    Page 3
str-out.asm



    115	015F  26: 89 45	FE		     mov es:[di-2], ax		     ;printing bottom left corner
    116
    117	0163  B0 CD			     mov al, HORIZONTAL_BORDER
    118
    119	0165  33 DB			     xor bx, bx
    120
    121	0167			     building_lower_border:
    122	0167  D1 E3			     shl bx, 1
    123	0169  26: 89 01			     mov es:[di+bx], ax
    124	016C  D1 EB			     shr bx, 1
    125
    126	016E  43			     inc bx
    127
    128	016F  E2 F6			     loop building_lower_border
    129
    130	0171  B0 BC			     mov al, BOTTOM_RIGHT_CORNER
    131	0173  D1 E3			     shl bx, 1
    132	0175  26: 89 01			     mov es:[di+bx], ax		     ;printing bottom right corner
    133
    134	0178  C3			     ret
    135	0179				     endp
    136				     ;___________________________________________________________________________;
    137
    138				     ;__PRINTSENTENCE__
    139				     ;Printing the input string
    140				     ;Entry: AH	= color	of sentence
    141				     ;Exit: -
    142				     ;Destr: AL, BX, CX, DI
    143				     ;___________________________________________________________________________;
    144	0179			     PrintSentence	     proc
    145	0179  E8 005B			     call FindInputStrlen
    146
    147	017C  8B D9			     mov bx, cx
    148	017E  E8 0060			     call RoundBxToEvenNum
    149	0181  F7 DB			     neg bx
    150	0183  81 C3 07CA		     add bx, ADRESS_OF_FRAME
    151	0187  8B FB			     mov di, bx
    152
    153	0189  A0 0088			     mov al, ds:[ADRESS_OF_INPUT]    ;al = the 1st symbol of input
    154
    155	018C  33 DB			     xor bx, bx
    156
    157	018E			     building_sentence:
    158	018E  D1 E3			     shl bx, 1
    159	0190  26: 89 01			     mov es:[di+bx], ax
    160	0193  D1 EB			     shr bx, 1
    161
    162	0195  43			     inc bx
    163	0196  8A 87 0088		     mov al, ds:[bx+ADRESS_OF_INPUT]
    164
    165	019A  E2 F2			     loop building_sentence
    166
    167	019C  C3			     ret
    168	019D				     endp
    169				     ;___________________________________________________________________________;
    170
    171
Turbo Assembler	 Version 4.1	    02/21/26 18:40:28	    Page 4
str-out.asm



    172				     ;__BUILDTOPCORNERS__
    173				     ;Printing top right and left corners.
    174				     ;Entry: AH	= color	of text
    175				     ;Exit: -
    176				     ;Destr: AL, BX, CX, DI
    177				     ;___________________________________________________________________________;
    178	019D			     BuildTopCorners	     proc
    179	019D  E8 0037			     call FindInputStrlen
    180
    181	01A0  8B D9			     mov bx, cx
    182	01A2  E8 003C			     call RoundBxToEvenNum
    183				     ;	     mov di, CENTER_OF_FRAME
    184				     ;	     sub di, PLACE_OF_UPPER_BORDER   ;di = same	row as border, but in center
    185	01A5  2B FB			     sub di, bx
    186
    187	01A7  B0 C9			     mov al, TOP_LEFT_CORNER
    188	01A9  83 EF 02			     sub di, 2			     ;di = the start of	top border
    189	01AC  26: 89 05			     mov es:[di], ax
    190
    191	01AF  D1 E1			     shl cx, 1
    192
    193	01B1  B0 BB			     mov al, TOP_RIGHT_CORNER
    194	01B3  03 F9			     add di, cx			     ;di = the end of top border
    195	01B5  26: 89 45	02		     mov es:[di+2], ax
    196
    197	01B9  C3			     ret
    198	01BA				     endp
    199				     ;___________________________________________________________________________;
    200
    201
    202				     ;__BUILDBOTTOMCORNERS__
    203				     ;Printing bottom left and right corners of	frame.
    204				     ;Entry: AH	= color	of the text
    205				     ;Exit: -
    206				     ;Destr: AL, BX, CX, DI
    207				     ;___________________________________________________________________________;
    208	01BA			     BuildBottomCorners	     proc
    209	01BA  E8 001A			     call FindInputStrlen
    210
    211	01BD  8B D9			     mov bx, cx
    212	01BF  E8 001F			     call RoundBxToEvenNum
    213				     ;	     mov di, CENTER_OF_FRAME
    214				     ;	     sub di, PLACE_OF_LOWER_BORDER   ;di = same	row as border, but in center
    215	01C2  2B FB			     sub di, bx
    216
    217	01C4  B0 C8			     mov al, BOTTOM_LEFT_CORNER
    218	01C6  83 EF 02			     sub di, 2
    219	01C9  26: 89 05			     mov es:[di], ax		     ;printing bottom left corner
    220
    221	01CC  D1 E1			     shl cx, 1
    222
    223	01CE  B0 BC			     mov al, BOTTOM_RIGHT_CORNER
    224	01D0  03 F9			     add di, cx
    225	01D2  26: 89 45	02		     mov es:[di+2], ax		     ;printing bottom right corner
    226
    227	01D6  C3			     ret
    228	01D7				     endp
Turbo Assembler	 Version 4.1	    02/21/26 18:40:28	    Page 5
str-out.asm



    229				     ;___________________________________________________________________________;
    230
    231
    232				     ;__SETCYCLECOUNTER__
    233				     ;Setting cx as counter of input symbols (the max value is 0EEh)
    234				     ;Entry: -
    235				     ;Exit: cx = count of input	symbols
    236				     ;Destr: -
    237				     ;___________________________________________________________________________;
    238	01D7			     FindInputStrlen proc
    239	01D7  8A 0E 0080		     mov cl, ds:[80h]
    240	01DB  B5 00			     mov ch, 00
    241
    242	01DD  83 E9 07			     sub cx, COUNT_TO_SKIP
    243
    244	01E0  C3			     ret
    245	01E1				     endp
    246				     ;__________________________________________________________________________;
    247
    248
    249				     ;__ROUNDBXTOEVENNUM__
    250				     ;Rounding value in	bx to the nearest and the lowest even number
    251				     ;Entry: BX	= value
    252				     ;Exit: BX = even value
    253				     ;Destr: -
    254				     ;__________________________________________________________________________;
    255	01E1			     RoundBxToEvenNum		     proc
    256	01E1  D1 EB			     shr bx, 1
    257	01E3  D1 E3			     shl bx, 1
    258
    259	01E5  C3			     ret
    260	01E6				     endp
    261				     ;__________________________________________________________________________;
    262
    263				     end	     Start
Turbo Assembler	 Version 4.1	    02/21/26 18:40:28	    Page 6
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/21/26"
??FILENAME			  Text	 "str-out "
??TIME				  Text	 "18:40:28"
??VERSION			  Number 040A
@32BIT				  Text	 0
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 STR-OUT
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ADRESS_OF_FIRST_CMD		  Number 0082
ADRESS_OF_FRAME			  Number 07CA
ADRESS_OF_INPUT			  Number 0088
ADRESS_OF_SECOND_CMD		  Number 0085
BOTTOM_LEFT_CORNER		  Number 00C8
BOTTOM_RIGHT_CORNER		  Number 00BC
BUILDBOTTOMCORNERS		  Near	 DGROUP:01BA
BUILDING_LOWER_BORDER		  Near	 DGROUP:0167
BUILDING_SENTENCE		  Near	 DGROUP:018E
BUILDING_UPPER_BORDER		  Near	 DGROUP:0137
BUILDTOPCORNERS			  Near	 DGROUP:019D
COUNT_TO_SKIP			  Number 0007
FINDINPUTSTRLEN			  Near	 DGROUP:01D7
HORIZONTAL_BORDER		  Number 00CD
PRINTFRAME			  Near	 DGROUP:0112
PRINTLOWERBORDER		  Near	 DGROUP:0149
PRINTSENTENCE			  Near	 DGROUP:0179
PRINTUPPERBORDER		  Near	 DGROUP:0119
REL_ADRESS_OF_BORDER		  Number 00A0
ROUNDBXTOEVENNUM		  Near	 DGROUP:01E1
START				  Near	 DGROUP:0100
TEXT_COLOR			  Number 0070
TOP_LEFT_CORNER			  Number 00C9
TOP_RIGHT_CORNER		  Number 00BB
VERTICAL_BORDER			  Number 00BA
VIDEOSEG			  Number B800

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  01E6 Word	  Public  CODE
